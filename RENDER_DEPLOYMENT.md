# Render Deployment Checklist

## Pre-deployment Verification

### ✅ Build Tests
- [x] Server builds successfully (`npm run build` in server/)
- [x] Client builds successfully (`npm run build` in client/)
- [x] TypeScript compilation passes without errors
- [x] No unused variables or parameters in TypeScript

### ✅ Configuration Files
- [x] `render.yaml` configured with proper service definitions
- [x] Health check endpoint available at `/health`
- [x] Environment variables properly configured
- [x] Node.js version specified (>=18.0.0)
- [x] Package.json scripts optimized for production

### ✅ Data Management
- [x] Data directory creation script (`ensure-data-dir.js`)
- [x] Persistent disk mounted at `/opt/render/project/src/data`
- [x] Initial data files created automatically
- [x] Database service handles missing files gracefully

### ✅ Security
- [x] JWT_SECRET will be auto-generated by Render
- [x] ADMIN_PASSWORD will be auto-generated by Render
- [x] CORS properly configured for production
- [x] Rate limiting configured
- [x] API routes protected with authentication

### ✅ Frontend Configuration
- [x] API service detects production environment
- [x] VITE_API_URL configured to use backend service URL
- [x] Static site properly configured with SPA routing
- [x] Build output in correct directory (`dist/`)

## Deployment Steps

1. **Push to GitHub Repository**
   ```bash
   git add .
   git commit -m "Prepare for Render deployment"
   git push origin main
   ```

2. **Create New Blueprint in Render**
   - Go to [Render Dashboard](https://dashboard.render.com)
   - Click "New +" → "Blueprint"
   - Connect your GitHub repository
   - Select the `render.yaml` file

3. **Review Generated Environment Variables**
   - Check that `JWT_SECRET` is generated
   - Check that `ADMIN_PASSWORD` is generated
   - Verify `CORS_ORIGIN` points to frontend URL
   - Verify `VITE_API_URL` points to backend URL

4. **Monitor Deployment**
   - Watch build logs for both services
   - Verify health check passes
   - Test frontend loads correctly
   - Test API endpoints respond

## Post-deployment Testing

### API Health Check
```bash
curl https://your-api-service.onrender.com/health
```

### Frontend Access
- Navigate to your frontend URL
- Verify login/register works
- Test meeting creation
- Test admin functionality

### Admin Account Setup
- Use the auto-generated admin credentials
- Email: `admin@example.com`
- Password: Check environment variables in Render dashboard

## Troubleshooting

### Common Issues
1. **Build Failures**: Check Node.js version compatibility
2. **TypeScript Errors**: All TypeScript dependencies are in `dependencies` for build compatibility
3. **Data Directory Issues**: Verify disk mount path in `render.yaml`
4. **CORS Errors**: Ensure frontend and backend URLs are correctly configured
5. **Socket.io Issues**: Verify WebSocket connections work in production
6. **TS2688 Error**: Fixed by moving `@types/node` and `typescript` to `dependencies`

### Logs Access
- Backend logs: Render dashboard → videoconference-api → Logs
- Frontend logs: Render dashboard → videoconference-web → Logs

## Monitoring

### Health Checks
- Backend: `GET /health` should return 200 OK
- Frontend: Root URL should load the application

### Performance
- Monitor response times in Render dashboard
- Check disk usage for data directory
- Monitor memory and CPU usage

## Scaling Considerations

### Starter Plan Limits
- 512MB RAM per service
- 0.1 CPU per service
- Shared resources

### Upgrade Triggers
- High memory usage (>80% consistently)
- Slow response times (>2s)
- Frequent service restarts
- Disk space approaching limit (>80%)

## Backup Strategy

### Data Backup
- JSON files stored on persistent disk
- Regular exports recommended
- Consider database migration for production scale

### Code Backup
- GitHub repository serves as code backup
- Tag releases for rollback capability